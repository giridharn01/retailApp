"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[140],{140:(e,s,r)=>{r.r(s),r.d(s,{default:()=>c});var a=r(555),t=r(43),l=r(45),o=r(536),n=r(187),d=r(579);const c=t.memo(()=>{(0,l.Zp)();const{user:e,login:s}=(0,n.A)(),[r,c]=(0,t.useState)({name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),[i,u]=(0,t.useState)(""),[m,b]=(0,t.useState)(""),[x,p]=(0,t.useState)(!1),[f,h]=(0,t.useState)("profile"),[w,g]=(0,t.useState)([]);(0,t.useEffect)(()=>{e&&(c(s=>(0,a.A)((0,a.A)({},s),{},{name:e.name||"",email:e.email||""})),y())},[e]);const y=(0,t.useCallback)(async()=>{try{const e=await(0,o.A)("/service-requests/user");g(e.data)}catch(e){u("Failed to fetch service requests")}},[]),v=(0,t.useCallback)(e=>{c(s=>(0,a.A)((0,a.A)({},s),{},{[e.target.name]:e.target.value}))},[]),j=(0,t.useCallback)(async e=>{e.preventDefault();try{u(""),b(""),p(!0),await(0,o.A)("/users/profile","PUT",{name:r.name,email:r.email}),b("Profile updated successfully")}catch(s){u(s.message||"Failed to update profile")}finally{p(!1)}},[r]),N=(0,t.useCallback)(async e=>{if(e.preventDefault(),r.newPassword===r.confirmPassword)try{u(""),b(""),p(!0),await(0,o.A)("/users/change-password","PUT",{currentPassword:r.currentPassword,newPassword:r.newPassword}),b("Password changed successfully"),c(e=>(0,a.A)((0,a.A)({},e),{},{currentPassword:"",newPassword:"",confirmPassword:""}))}catch(s){u(s.message||"Failed to change password")}finally{p(!1)}else u("New passwords do not match")},[r]);return e?(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsx)("div",{className:"border-b border-gray-200",children:(0,d.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,d.jsx)("button",{onClick:()=>h("profile"),className:"".concat("profile"===f?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Profile Information"}),(0,d.jsx)("button",{onClick:()=>h("password"),className:"".concat("password"===f?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Change Password"}),(0,d.jsx)("button",{onClick:()=>h("services"),className:"".concat("services"===f?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Service Requests"})]})})}),i&&(0,d.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,d.jsx)("span",{className:"block sm:inline",children:i})}),m&&(0,d.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,d.jsx)("span",{className:"block sm:inline",children:m})}),"profile"===f&&(0,d.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,d.jsx)("input",{type:"text",name:"name",value:r.name,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,d.jsx)("input",{type:"email",name:"email",value:r.email,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,d.jsx)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:x?"Updating...":"Update Profile"})]}),"password"===f&&(0,d.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Current Password"}),(0,d.jsx)("input",{type:"password",name:"currentPassword",value:r.currentPassword,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,d.jsx)("input",{type:"password",name:"newPassword",value:r.newPassword,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,d.jsx)("input",{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,d.jsx)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:x?"Changing Password...":"Change Password"})]}),"services"===f&&(0,d.jsx)("div",{className:"space-y-4",children:0===w.length?(0,d.jsx)("p",{className:"text-gray-500",children:"No service requests found."}):w.map(e=>(0,d.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-medium",children:e.serviceType}),(0,d.jsxs)("p",{className:"text-sm text-gray-500",children:["Vehicle: ",e.vehicleType," ",e.vehicleModel]}),(0,d.jsxs)("p",{className:"text-sm text-gray-500",children:["Preferred Date: ",new Date(e.preferredDate).toLocaleDateString()]})]}),(0,d.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"in-progress"===e.status?"bg-blue-100 text-blue-800":"completed"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,d.jsx)("p",{className:"mt-2 text-gray-600",children:e.description})]},e._id))})]}):(0,d.jsx)("div",{children:"Please log in to view your profile."})})}}]);
//# sourceMappingURL=140.43e6ec8f.chunk.js.map