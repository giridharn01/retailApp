{"version":3,"file":"static/js/460.a50b2c5d.chunk.js","mappings":"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","sources":["pages/user/CheckoutPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useCart } from '../../context/CartContext';\r\nimport { apiRequest } from '../../utils/api';\r\n\r\nconst CheckoutPage = () => {\r\n    const { cart, clearCart, refreshCart } = useCart();\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        phone: '',\r\n        street: '',\r\n        city: '',\r\n        state: '',\r\n        zipCode: '',\r\n        country: 'India'\r\n    });\r\n    const [paymentMethod, setPaymentMethod] = useState('cod'); // Cash on Delivery as default\r\n    const [notes, setNotes] = useState('');\r\n\r\n    const handleInputChange = (e) => {\r\n        setFormData({\r\n            ...formData,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!formData.name || !formData.phone || !formData.street || !formData.city || !formData.state || !formData.zipCode) {\r\n            alert('Please fill in all required fields');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const orderData = {\r\n                shippingAddress: formData,\r\n                paymentMethod,\r\n                notes\r\n            };\r\n\r\n            const response = await apiRequest('/orders', 'POST', orderData);\r\n            \r\n            // Clear the cart state since backend cleared it during order creation\r\n            await clearCart(true); // skipApiCall = true since backend already cleared it\r\n            \r\n            // Navigate to order confirmation\r\n            navigate(`/orders/${response.data._id}`, { \r\n                state: { order: response.data } \r\n            });\r\n        } catch (error) {\r\n            console.error('Error creating order:', error);\r\n            alert('Error creating order. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (cart.items.length === 0) {\r\n        return (\r\n            <div className=\"max-w-4xl mx-auto px-4 py-8\">\r\n                <div className=\"text-center\">\r\n                    <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Your cart is empty</h1>\r\n                    <p className=\"text-gray-600 mb-8\">Please add items to your cart before checkout.</p>\r\n                    <button\r\n                        onClick={() => navigate('/products')}\r\n                        className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                        Continue Shopping\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto px-4 py-8\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">Checkout</h1>\r\n            \r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                {/* Checkout Form */}\r\n                <div>\r\n                    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                        <h2 className=\"text-xl font-semibold mb-6\">Shipping Information</h2>\r\n                        \r\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                        Full Name *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"name\"\r\n                                        value={formData.name}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                \r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                        Phone Number *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        name=\"phone\"\r\n                                        value={formData.phone}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                    Street Address *\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"street\"\r\n                                    value={formData.street}\r\n                                    onChange={handleInputChange}\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                        City *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"city\"\r\n                                        value={formData.city}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                \r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                        State *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"state\"\r\n                                        value={formData.state}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                \r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                        ZIP Code *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"zipCode\"\r\n                                        value={formData.zipCode}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                    Country\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"country\"\r\n                                    value={formData.country}\r\n                                    onChange={handleInputChange}\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n                                    Payment Method *\r\n                                </label>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"flex items-center\">\r\n                                        <input\r\n                                            type=\"radio\"\r\n                                            name=\"paymentMethod\"\r\n                                            value=\"cod\"\r\n                                            checked={paymentMethod === 'cod'}\r\n                                            onChange={(e) => setPaymentMethod(e.target.value)}\r\n                                            className=\"mr-2\"\r\n                                        />\r\n                                        Cash on Delivery\r\n                                    </label>\r\n                                    <label className=\"flex items-center\">\r\n                                        <input\r\n                                            type=\"radio\"\r\n                                            name=\"paymentMethod\"\r\n                                            value=\"online\"\r\n                                            checked={paymentMethod === 'online'}\r\n                                            onChange={(e) => setPaymentMethod(e.target.value)}\r\n                                            className=\"mr-2\"\r\n                                        />\r\n                                        Online Payment (Coming Soon)\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                    Order Notes (Optional)\r\n                                </label>\r\n                                <textarea\r\n                                    name=\"notes\"\r\n                                    value={notes}\r\n                                    onChange={(e) => setNotes(e.target.value)}\r\n                                    rows=\"3\"\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                    placeholder=\"Any special instructions for delivery...\"\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                            >\r\n                                {loading ? 'Processing...' : 'Place Order'}\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Order Summary */}\r\n                <div>\r\n                    <div className=\"bg-white rounded-lg shadow-md p-6 sticky top-4\">\r\n                        <h2 className=\"text-xl font-semibold mb-4\">Order Summary</h2>\r\n                        \r\n                        <div className=\"space-y-3 mb-6\">\r\n                            {cart.items.map((item) => (\r\n                                <div key={item.product._id} className=\"flex justify-between items-center\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <img\r\n                                            src={item.product.image || '/default-product.jpg'}\r\n                                            alt={item.product.name}\r\n                                            className=\"w-12 h-12 object-cover rounded mr-3\"\r\n                                        />\r\n                                        <div>\r\n                                            <p className=\"font-medium\">{item.product.name}</p>\r\n                                            <p className=\"text-sm text-gray-600\">Qty: {item.quantity}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <p className=\"font-medium\">₹{item.price * item.quantity}</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <div className=\"border-t pt-4 space-y-2\">\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-gray-600\">Subtotal</span>\r\n                                <span>₹{cart.subtotal}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-gray-600\">Tax (18% GST)</span>\r\n                                <span>₹{cart.tax}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-gray-600\">Shipping</span>\r\n                                <span>{cart.shippingCost === 0 ? 'Free' : `₹${cart.shippingCost}`}</span>\r\n                            </div>\r\n                            <div className=\"border-t pt-2\">\r\n                                <div className=\"flex justify-between text-lg font-semibold\">\r\n                                    <span>Total</span>\r\n                                    <span>₹{cart.totalAmount}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CheckoutPage; "],"names":["CheckoutPage","cart","clearCart","refreshCart","useCart","navigate","useNavigate","loading","setLoading","useState","formData","setFormData","name","phone","street","city","state","zipCode","country","paymentMethod","setPaymentMethod","notes","setNotes","handleInputChange","e","_objectSpread","target","value","items","length","_jsx","className","children","_jsxs","onClick","onSubmit","async","preventDefault","orderData","shippingAddress","response","apiRequest","concat","data","_id","order","error","console","alert","type","onChange","required","checked","rows","placeholder","disabled","map","item","src","product","image","alt","quantity","price","subtotal","tax","shippingCost","totalAmount"],"sourceRoot":""}