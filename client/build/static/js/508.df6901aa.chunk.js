"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[508],{508:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var a=t(43),r=t(45),c=t(536),n=t(603),l=t(187),i=t(579);const o=a.memo(()=>{const{id:e}=(0,r.g)(),s=(0,r.Zp)(),{user:t}=(0,l.A)(),{addToCart:o}=(0,n._)(),[d,m]=(0,a.useState)(null),[u,x]=(0,a.useState)(!0),[f,h]=(0,a.useState)(null),[g,b]=(0,a.useState)(1),[p,j]=(0,a.useState)(!1),y=(0,a.useCallback)(async()=>{try{x(!0);const s=await(0,c.A)("/products/".concat(e));m(s.data)}catch(s){h(s.message)}finally{x(!1)}},[e]);(0,a.useEffect)(()=>{y()},[y]);return u?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):f?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-red-600",children:["Error: ",f]})}):d?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:(0,i.jsxs)("div",{className:"lg:grid lg:grid-cols-2 lg:gap-x-8",children:[(0,i.jsx)("div",{className:"lg:max-w-lg lg:self-end",children:(0,i.jsx)("div",{className:"aspect-w-1 aspect-h-1 rounded-lg overflow-hidden",children:(0,i.jsx)("img",{src:d.image,alt:d.name,className:"w-full h-full object-center object-cover"})})}),(0,i.jsxs)("div",{className:"mt-10 px-4 sm:px-0 sm:mt-16 lg:mt-0",children:[(0,i.jsx)("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900",children:d.name}),(0,i.jsxs)("div",{className:"mt-3",children:[(0,i.jsx)("h2",{className:"sr-only",children:"Product information"}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("span",{className:"text-3xl font-bold text-blue-600",children:["\u20b9",d.price]}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(d.stock>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:d.stock>0?"In Stock":"Out of Stock"})]})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)("h3",{className:"sr-only",children:"Description"}),(0,i.jsx)("div",{className:"text-base text-gray-700 space-y-6",children:(0,i.jsx)("p",{children:d.description})})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("h3",{className:"text-sm text-gray-600",children:"Category:"}),(0,i.jsx)("p",{className:"ml-2 text-sm text-gray-900",children:d.category})]}),(0,i.jsxs)("div",{className:"flex items-center mt-2",children:[(0,i.jsx)("h3",{className:"text-sm text-gray-600",children:"Stock:"}),(0,i.jsx)("p",{className:"ml-2 text-sm text-gray-900",children:d.stock>0?"In Stock":"Out of Stock"})]})]}),(0,i.jsxs)("div",{className:"mt-10 space-y-4",children:[t&&"admin"!==t.role&&d.stock>0&&(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),(0,i.jsx)("select",{value:g,onChange:e=>b(parseInt(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[...Array(Math.min(10,d.stock))].map((e,s)=>(0,i.jsx)("option",{value:s+1,children:s+1},s+1))})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[t&&"admin"!==t.role&&d.stock>0?(0,i.jsx)("button",{onClick:async()=>{if(t)if("admin"!==t.role)try{j(!0),await o(d._id,g),alert("Product added to cart successfully!")}catch(f){alert("Error adding product to cart: "+f.message)}finally{j(!1)}else alert("Admins cannot add products to cart. Please use the admin panel to manage products.");else s("/login")},disabled:p,className:"flex-1 bg-blue-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:p?"Adding...":"Add to Cart"}):t&&"admin"===t.role?(0,i.jsx)("button",{onClick:()=>s("/admin/products"),className:"flex-1 bg-blue-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Manage Products"}):(0,i.jsx)("button",{onClick:()=>{window.location.href="mailto:contact@autoparts.com?subject=Inquiry about ".concat(d.name)},className:"flex-1 bg-blue-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Contact for Purchase"}),!t&&(0,i.jsx)("button",{onClick:()=>s("/login"),className:"flex-1 bg-gray-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Login to Purchase"})]})]})]})]})})}):(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-gray-600",children:"Product not found"})})})}}]);
//# sourceMappingURL=508.df6901aa.chunk.js.map