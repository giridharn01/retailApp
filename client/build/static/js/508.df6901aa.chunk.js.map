{"version":3,"file":"static/js/508.df6901aa.chunk.js","mappings":"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","sources":["pages/common/ProductDetailPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { apiRequest } from '../../utils/api';\nimport { useCart } from '../../context/CartContext';\nimport { useAuth } from '../../context/AuthContext';\n\nconst ProductDetailPage = React.memo(() => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const { addToCart } = useCart();\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [addingToCart, setAddingToCart] = useState(false);\n\n  const fetchProduct = useCallback(async () => {\n    try {\n      setLoading(true);\n      const res = await apiRequest(`/products/${id}`);\n      setProduct(res.data);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    fetchProduct();\n  }, [fetchProduct]);\n\n  const handleAddToCart = async () => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n\n    if (user.role === 'admin') {\n      alert('Admins cannot add products to cart. Please use the admin panel to manage products.');\n      return;\n    }\n\n    try {\n      setAddingToCart(true);\n      await addToCart(product._id, quantity);\n      alert('Product added to cart successfully!');\n    } catch (error) {\n      alert('Error adding product to cart: ' + error.message);\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n\n  const handleContact = () => {\n    // You can implement this based on your needs:\n    // 1. Open a contact form\n    // 2. Navigate to a contact page\n    // 3. Show a modal with contact information\n    window.location.href = `mailto:contact@autoparts.com?subject=Inquiry about ${product.name}`;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-red-600\">Error: {error}</div>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-gray-600\">Product not found</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8\">\n        <div className=\"lg:grid lg:grid-cols-2 lg:gap-x-8\">\n          {/* Product Image */}\n          <div className=\"lg:max-w-lg lg:self-end\">\n            <div className=\"aspect-w-1 aspect-h-1 rounded-lg overflow-hidden\">\n              <img\n                src={product.image}\n                alt={product.name}\n                className=\"w-full h-full object-center object-cover\"\n              />\n            </div>\n          </div>\n\n          {/* Product Info */}\n          <div className=\"mt-10 px-4 sm:px-0 sm:mt-16 lg:mt-0\">\n            <h1 className=\"text-3xl font-extrabold tracking-tight text-gray-900\">\n              {product.name}\n            </h1>\n            <div className=\"mt-3\">\n              <h2 className=\"sr-only\">Product information</h2>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-3xl font-bold text-blue-600\">\n                  â‚¹{product.price}\n                </span>\n                <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n                  product.stock > 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                }`}>\n                  {product.stock > 0 ? 'In Stock' : 'Out of Stock'}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"mt-6\">\n              <h3 className=\"sr-only\">Description</h3>\n              <div className=\"text-base text-gray-700 space-y-6\">\n                <p>{product.description}</p>\n              </div>\n            </div>\n\n            <div className=\"mt-6\">\n              <div className=\"flex items-center\">\n                <h3 className=\"text-sm text-gray-600\">Category:</h3>\n                <p className=\"ml-2 text-sm text-gray-900\">{product.category}</p>\n              </div>\n              <div className=\"flex items-center mt-2\">\n                <h3 className=\"text-sm text-gray-600\">Stock:</h3>\n                <p className=\"ml-2 text-sm text-gray-900\">\n                  {product.stock > 0 ? 'In Stock' : 'Out of Stock'}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"mt-10 space-y-4\">\n              {user && user.role !== 'admin' && product.stock > 0 && (\n                <div className=\"flex items-center space-x-4\">\n                  <label className=\"text-sm font-medium text-gray-700\">Quantity:</label>\n                  <select\n                    value={quantity}\n                    onChange={(e) => setQuantity(parseInt(e.target.value))}\n                    className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    {[...Array(Math.min(10, product.stock))].map((_, i) => (\n                      <option key={i + 1} value={i + 1}>{i + 1}</option>\n                    ))}\n                  </select>\n                </div>\n              )}\n              \n              <div className=\"flex space-x-4\">\n                {user && user.role !== 'admin' && product.stock > 0 ? (\n                  <button\n                    onClick={handleAddToCart}\n                    disabled={addingToCart}\n                    className=\"flex-1 bg-blue-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n                  >\n                    {addingToCart ? 'Adding...' : 'Add to Cart'}\n                  </button>\n                ) : user && user.role === 'admin' ? (\n                  <button\n                    onClick={() => navigate('/admin/products')}\n                    className=\"flex-1 bg-blue-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                  >\n                    Manage Products\n                  </button>\n                ) : (\n              <button\n                onClick={handleContact}\n                    className=\"flex-1 bg-blue-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Contact for Purchase\n              </button>\n                )}\n                \n                {!user && (\n                  <button\n                    onClick={() => navigate('/login')}\n                    className=\"flex-1 bg-gray-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\"\n                  >\n                    Login to Purchase\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport default ProductDetailPage; "],"names":["React","id","useParams","navigate","useNavigate","user","useAuth","addToCart","useCart","product","setProduct","useState","loading","setLoading","error","setError","quantity","setQuantity","addingToCart","setAddingToCart","fetchProduct","useCallback","async","res","apiRequest","concat","data","err","message","useEffect","_jsx","className","children","_jsxs","src","image","alt","name","price","stock","description","category","role","value","onChange","e","parseInt","target","Array","Math","min","map","_","i","onClick","_id","alert","disabled","handleContact","window","location","href"],"sourceRoot":""}